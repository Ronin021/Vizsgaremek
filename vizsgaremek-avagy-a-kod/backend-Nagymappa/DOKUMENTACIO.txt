========================================
VIZSGAREMEK BACKEND - DOKUMENTÃCIÃ“
========================================

Ez a dokumentÃ¡ciÃ³ lÃ©pÃ©srÅ‘l lÃ©pÃ©sre ismerteti a backend felÃ©pÃ­tÃ©sÃ©t Ã©s mÅ±kÃ¶dÃ©sÃ©t.

========================================
1. PROJECT STRUKTÃšRA
========================================

A backend a kÃ¶vetkezÅ‘ mappÃ¡kat tartalmazza:

ğŸ“ src/
  â”œâ”€ ğŸ“ controllers/      â†’ KÃ©rÃ©sek kezelÃ©se (GET, POST, PUT, DELETE)
  â”œâ”€ ğŸ“ models/           â†’ Adatok struktÃºrÃ¡ja (interface-ek)
  â”œâ”€ ğŸ“ services/         â†’ AdatbÃ¡zis logika (CRUD mÅ±veletek)
  â”œâ”€ ğŸ“ routes/           â†’ URL vÃ©gpontok
  â”œâ”€ ğŸ“ middleware/       â†’ KÃ¶zbensÅ‘ funkciÃ³k (auth, error handler)
  â”œâ”€ ğŸ“ dto/              â†’ AdatÃ¡tvitel formÃ¡tuma
  â”œâ”€ ğŸ“ utils/            â†’ SegÃ©d funkciÃ³k (password, jwt, sql)
  â”œâ”€ ğŸ“ tests/            â†’ Tesztek
  â”œâ”€ index.ts             â†’ Server indÃ­tÃ¡sa
  â”œâ”€ app.ts               â†’ Express app beÃ¡llÃ­tÃ¡sa
  â””â”€ db.ts                â†’ AdatbÃ¡zis kapcsolat


========================================
2. RÃ‰TEGARCHITEKTÃšRA
========================================

A kÃ³d 4 rÃ©tegre oszlik:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ROUTES (routes/)          â”‚ â† URL vÃ©gpontok kezelÃ©se
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   CONTROLLERS (controllers/)â”‚ â† KÃ©rÃ©sek feldolgozÃ¡sa
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   SERVICES (services/)      â”‚ â† Ãœzleti logika
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   DATABASE (db.ts)          â”‚ â† AdatbÃ¡zis mÅ±veletek
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


========================================
3. CRUD MÅ°VELETEK
========================================

Minden entitÃ¡snak (Product, Category, User, Order, OrderItem) ugyanaz a 5 alapmÅ±velete:

A. CREATE (LÃ©trehozÃ¡s)
   - Route:  POST /api/[entity]
   - Function: create[Entity]
   - Mit csinÃ¡l: Ãšj sor hozzÃ¡adÃ¡sa az adatbÃ¡zishoz
   - JSON body: { name: "...", ... }

B. READ (OlvasÃ¡s)
   - Route:  GET /api/[entity]        â†’ Ã–sszes
   - Route:  GET /api/[entity]/:id    â†’ Egy elem
   - Function: getAll[Entity]s / get[Entity]
   - Mit csinÃ¡l: Adatok lekÃ©rÃ©se az adatbÃ¡zisbÃ³l

C. UPDATE (FrissÃ­tÃ©s)
   - Route:  PUT /api/[entity]/:id
   - Function: update[Entity]
   - Mit csinÃ¡l: MeglÃ©vÅ‘ sor mÃ³dosÃ­tÃ¡sa
   - JSON body: { name: "...", ... }

D. DELETE (TÃ¶rlÃ©s)
   - Route:  DELETE /api/[entity]/:id
   - Function: delete[Entity]
   - Mit csinÃ¡l: Sor tÃ¶rlÃ©se az adatbÃ¡zisbÃ³l

E. FILTER/SEARCH (KeresÃ©s)
   - Route:  GET /api/[entity]/filter/...
   - Mit csinÃ¡l: SzÅ±rÃ©s feltÃ©telek alapjÃ¡n
   - Pl: GET /api/orders/user/:userId


========================================
4. FILE LEÃRÃS
========================================

A. MODELS (src/models/)
   FÃ¡jlok: Product.ts, Category.ts, User.ts, Order.ts, OrderItem.ts
   
   Tartalom: Interface-ek, amelyek meghatÃ¡rozzÃ¡k az adatok struktÃºrÃ¡jÃ¡t
   
   Pl Product.ts:
   interface Product {
     id: number;
     name: string;
     category_id: number;
     price: number;
     description: string;
     stock: number;
   }


B. DTO - Data Transfer Objects (src/dto/)
   FÃ¡jlok: productDto.ts, userDto.ts, orderDto.ts, loginRegisterDto.ts
   
   Tartalom: Azt definiÃ¡ljÃ¡k, amit a kliens kÃ¼ld POST/PUT kÃ©rÃ©snÃ©l
   
   Pl productDto.ts:
   interface ProductDto {
     name: string;
     category_id: number;
     price: number;
     description: string;
     stock: number;
   }
   
   MegjegyzÃ©s: DTO-ban nincs ID, mert az az adatbÃ¡zis generÃ¡lja!


C. SERVICES (src/services/)
   FÃ¡jlok: productService.ts, categoryService.ts, userService.ts, 
           orderService.ts, orderItemService.ts
   
   Tartalom: Az adatbÃ¡zis mÅ±veletek
   
   Pl productService.ts:
   - getAllProducts()        â†’ SELECT * FROM products
   - getProductById(id)      â†’ SELECT * FROM products WHERE id = ?
   - createProduct(data)     â†’ INSERT INTO products (...)
   - updateProduct(id, data) â†’ UPDATE products SET ... WHERE id = ?
   - deleteProduct(id)       â†’ DELETE FROM products WHERE id = ?


D. CONTROLLERS (src/controllers/)
   FÃ¡jlok: productController.ts, categoryController.ts, userController.ts,
           orderController.ts, orderItemController.ts
   
   Tartalom: KÃ©rÃ©sek feldolgozÃ¡sa Ã©s vÃ¡lasz kÃ¼ldÃ©se
   
   Pl productController.ts getAllProducts():
   1. req-bÅ‘l lekÃ©rjÃ¼k az adatokat (ha szÃ¼ksÃ©ges)
   2. meghÃ­vjuk a service-t
   3. vÃ¡laszban elkÃ¼ldjÃ¼k az eredmÃ©nyt
   
   Hiba kezelÃ©s:
   - 201: Sikeres lÃ©trehozÃ¡s
   - 200: Sikeres GET/PUT/DELETE
   - 404: Nem talÃ¡lhatÃ³
   - 500: Szerver hiba


E. ROUTES (src/routes/)
   FÃ¡jlok: products.ts, categories.ts, users.ts, orders.ts, orderItems.ts
   
   Tartalom: URL vÃ©gpontok Ã©s a hozzÃ¡juk tartozÃ³ kontrollerek
   
   Pl products.ts:
   GET    /api/products        â†’ getAllProducts controller
   GET    /api/products/:id    â†’ getProduct controller
   POST   /api/products        â†’ createProduct controller
   PUT    /api/products/:id    â†’ updateProduct controller
   DELETE /api/products/:id    â†’ deleteProduct controller


F. MIDDLEWARE (src/middleware/)
   - auth.ts:        Token ellenÅ‘rzÃ©s (hitelesÃ­tÃ©s)
   - errorHandler.ts: HibakezelÃ©s


G. UTILS (src/utils/)
   - password.ts: JelszÃ³ titkosÃ­tÃ¡s (egyszerÅ± verziÃ³, valÃ³di projektnÃ©l bcrypt!)
   - jwt.ts:      Token generÃ¡lÃ¡s Ã©s ellenÅ‘rzÃ©s
   - sql.ts:      SQL helper funkciÃ³k


H. ALAP FÃJLOK
   - index.ts: Server indÃ­tÃ¡sa a megadott porton
   - app.ts:   Express konfigurÃ¡lÃ¡sa, middleware-ek Ã©s routes-ok beÃ¡llÃ­tÃ¡sa
   - db.ts:    MySQL adatbÃ¡zis pool kapcsolat


========================================
5. ADATÃBZÃZIS TÃBLÃK Ã‰S RELÃCIÃ“K
========================================

A vizsgaremek.sql fÃ¡jlban 7 tÃ¡bla van:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ categories   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚ â† FÅ‘kulcs
â”‚ name         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
         â”‚ 1:N (egy kategÃ³ria - sok termÃ©k)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ products         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚
â”‚ name             â”‚
â”‚ category_id (FK) â”‚ â”€â”€â”€â”€â”€â†’ categories.id
â”‚ price            â”‚
â”‚ description      â”‚
â”‚ stock            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
         â”‚ 1:N (egy termÃ©k - sok rendelÃ©si tÃ©tel)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ order_items      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚
â”‚ order_id (FK)    â”‚ â”€â”€â”€â”€â”€â†’ orders.id
â”‚ product_id (FK)  â”‚ â”€â”€â”€â”€â”€â†’ products.id
â”‚ quantity         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
         â”‚ N:1 (sok tÃ©tel - egy rendelÃ©s)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ orders       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚ user_id (FK) â”‚ â”€â”€â”€â”€â”€â†’ users.id
â”‚ total_price  â”‚
â”‚ date         â”‚
â”‚ status       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
         â”‚ N:1 (sok rendelÃ©s - egy felhasznÃ¡lÃ³)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ users        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚ first_name   â”‚
â”‚ last_name    â”‚
â”‚ email        â”‚
â”‚ password_hashâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


========================================
6. API VÃ‰GPONTOK
========================================

PRODUCTS:
GET    /api/products           â†’ Ã–sszes termÃ©k
GET    /api/products/:id       â†’ Egy termÃ©k
POST   /api/products           â†’ Ãšj termÃ©k
PUT    /api/products/:id       â†’ TermÃ©k frissÃ­tÃ©se
DELETE /api/products/:id       â†’ TermÃ©k tÃ¶rlÃ©se

CATEGORIES:
GET    /api/categories         â†’ Ã–sszes kategÃ³ria
GET    /api/categories/:id     â†’ Egy kategÃ³ria
POST   /api/categories         â†’ Ãšj kategÃ³ria
PUT    /api/categories/:id     â†’ KategÃ³ria frissÃ­tÃ©se
DELETE /api/categories/:id     â†’ KategÃ³ria tÃ¶rlÃ©se

USERS:
GET    /api/users              â†’ Ã–sszes felhasznÃ¡lÃ³
GET    /api/users/:id          â†’ Egy felhasznÃ¡lÃ³
POST   /api/users              â†’ Ãšj felhasznÃ¡lÃ³
PUT    /api/users/:id          â†’ FelhasznÃ¡lÃ³ frissÃ­tÃ©se
DELETE /api/users/:id          â†’ FelhasznÃ¡lÃ³ tÃ¶rlÃ©se

ORDERS:
GET    /api/orders             â†’ Ã–sszes rendelÃ©s
GET    /api/orders/:id         â†’ Egy rendelÃ©s
GET    /api/orders/user/:userId â†’ FelhasznÃ¡lÃ³ rendelÃ©seit
POST   /api/orders             â†’ Ãšj rendelÃ©s
PUT    /api/orders/:id         â†’ RendelÃ©s frissÃ­tÃ©se
DELETE /api/orders/:id         â†’ RendelÃ©s tÃ¶rlÃ©se

ORDER ITEMS:
GET    /api/orderItems         â†’ Ã–sszes tÃ©tel
GET    /api/orderItems/:id     â†’ Egy tÃ©tel
GET    /api/orderItems/order/:orderId â†’ RendelÃ©s tÃ©teleit
POST   /api/orderItems         â†’ Ãšj tÃ©tel
PUT    /api/orderItems/:id     â†’ TÃ©tel frissÃ­tÃ©se
DELETE /api/orderItems/:id     â†’ TÃ©tel tÃ¶rlÃ©se


========================================
7. KÃ‰RÃ‰S/VÃLASZ PÃ‰LDÃK
========================================

A. Ã–SSZES TERMÃ‰K LEKÃ‰RÃ‰SE
   KÃ©rÃ©s:
   GET http://localhost:3000/api/products
   
   VÃ¡lasz (200):
   [
     {
       "id": 1,
       "name": "Modern KanapÃ©",
       "category_id": 1,
       "price": 289900,
       "description": "...",
       "stock": 14
     },
     ...
   ]


B. TERMÃ‰K LÃ‰TREHOZÃSA
   KÃ©rÃ©s:
   POST http://localhost:3000/api/products
   Content-Type: application/json
   
   {
     "name": "Ãšj TermÃ©k",
     "category_id": 1,
     "price": 50000,
     "description": "JÃ³ termÃ©k",
     "stock": 10
   }
   
   VÃ¡lasz (201):
   {
     "id": 11,
     "message": "TermÃ©k sikeresen hozzÃ¡adva"
   }


C. TERMÃ‰K FRISSÃTÃ‰SE
   KÃ©rÃ©s:
   PUT http://localhost:3000/api/products/1
   Content-Type: application/json
   
   {
     "name": "FrissÃ­tett KanapÃ©",
     "category_id": 1,
     "price": 299900,
     "description": "...",
     "stock": 20
   }
   
   VÃ¡lasz (200):
   {
     "message": "TermÃ©k sikeresen frissÃ­tve"
   }


D. TERMÃ‰K TÃ–RLÃ‰SE
   KÃ©rÃ©s:
   DELETE http://localhost:3000/api/products/1
   
   VÃ¡lasz (200):
   {
     "message": "TermÃ©k sikeresen tÃ¶rÃ¶lve"
   }


========================================
8. INDÃTÃS
========================================

1. TelepÃ­tÃ©s:
   npm install

2. FordÃ­tÃ¡s TypeScript â†’ JavaScript:
   npm run build

3. Server indÃ­tÃ¡sa:
   node lib/index.js
   
   vagy
   
   npx ts-node src/index.ts (fejlesztÃ©shez)

4. Node telepÃ­tÃ©se:
   npm install -D tsx

5. FuttatÃ¡s txs-al:
   npx tsx src/index.js


========================================
9. ENVIRONMENT VÃLTOZÃ“K
========================================

.env fÃ¡jlban kell beÃ¡llÃ­tani:

DB_HOST=localhost        â†’ AdatbÃ¡zis szerver
DB_USER=root             â†’ AdatbÃ¡zis felhasznÃ¡lÃ³
DB_PASSWORD=             â†’ JelszÃ³
DB_NAME=vizsgaremek      â†’ AdatbÃ¡zis neve
PORT=3000                â†’ Server port
JWT_SECRET=titok         â†’ Token titkosÃ­tÃ¡s


========================================
10. KÃ–VETKEZÅ LÃ‰PÃ‰SEK (CHECKPOINT 2)
========================================

1. âœ… Alap CRUD mÅ±veletek - KÃ‰SZ
2. â³ AuthentikÃ¡ciÃ³ (login/register)
3. â³ Input validÃ¡ciÃ³
4. â³ Tesztek megÃ­rÃ¡sa
5. â³ Admin panel
6. â³ FizetÃ©si integrÃ¡ciÃ³
7. â³ Email kÃ¼ldÃ©s


========================================
11. HIBAKEZELÃ‰S
========================================

Ha 500-as hibÃ¡t kapsz:
1. NÃ©zd meg a terminal outputot (console.log)
2. EllenÅ‘rizd az adatbÃ¡zis kapcsolatot
3. EllenÅ‘rizd a SQL szintaxist

Ha 404-et kapsz:
- Az adott ID nem lÃ©tezik az adatbÃ¡zisban

Ha 401-et kapsz:
- Token hiÃ¡nyzik vagy Ã©rvÃ©nytelen


========================================
12. MEGJEGYZÃ‰SEK
========================================

- Ez a backend vizsgaremek szintÅ±
- A kÃ³d egyszerÅ± Ã©s Ã©rthetÅ‘
- ProdukciÃ³s verziÃ³ban:
  * Bcrypt-et kell hasznÃ¡lni jelszÃ³hoz
  * jsonwebtoken csomagot JWT-hez
  * ValidÃ¡ciÃ³t kell hozzÃ¡adni
  * Error logging-ot kell beÃ¡llÃ­tani
  * Rate limiting-ot kell hozzÃ¡adni

========================================
